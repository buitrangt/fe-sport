{"ast":null,"code":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport './index.css';\nimport App from './App';\nimport { AuthProvider } from './context/AuthContext';\nimport { initializeLocalStorage } from './utils/localStorageManager';\n\n// ============================================\n// REBUILD DOM STRATEGY + AUTH MANAGEMENT\n// ============================================\nconsole.log('üîÑ Starting application with clean DOM and auth management...');\n\n// Initialize localStorage management FIRST\ninitializeLocalStorage();\n\n// 1. CLEAR ALL EXISTING DOM COMPLETELY\nconst clearExistingDOM = () => {\n  try {\n    // Clear all existing React roots\n    const existingRoots = document.querySelectorAll('[data-reactroot]');\n    existingRoots.forEach(root => root.remove());\n\n    // Clear any portal containers\n    const portals = document.querySelectorAll('[id*=\"portal\"], [class*=\"portal\"]');\n    portals.forEach(portal => portal.remove());\n\n    // Clear any modal containers\n    const modals = document.querySelectorAll('[id*=\"modal\"], [class*=\"modal\"]');\n    modals.forEach(modal => modal.remove());\n\n    // Clear any overlay containers\n    const overlays = document.querySelectorAll('[class*=\"overlay\"], [id*=\"overlay\"]');\n    overlays.forEach(overlay => overlay.remove());\n    console.log('üßπ DOM cleared completely');\n  } catch (e) {\n    console.log('üßπ DOM clear completed (with minor errors)');\n  }\n};\n\n// 2. FORCE CLEAN THE ROOT ELEMENT\nconst prepareCleanRoot = () => {\n  const rootElement = document.getElementById('root');\n  if (rootElement) {\n    // Clear all children\n    rootElement.innerHTML = '';\n\n    // Remove all attributes except id\n    const attributes = Array.from(rootElement.attributes);\n    attributes.forEach(attr => {\n      if (attr.name !== 'id') {\n        rootElement.removeAttribute(attr.name);\n      }\n    });\n\n    // Reset any styles\n    rootElement.style.cssText = '';\n    console.log('üéØ Root element prepared clean');\n  }\n};\n\n// 3. MINIMAL ERROR SUPPRESSION (only console)\nconst originalConsoleError = console.error;\nconsole.error = (...args) => {\n  const message = args.join(' ');\n  if (message.includes('insertBefore') || message.includes('commitPlacement') || message.includes('NotFoundError')) {\n    console.debug('üîá DOM error suppressed:', message);\n    return;\n  }\n  originalConsoleError(...args);\n};\n\n// 4. SIMPLE QUERY CLIENT\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: false,\n      // Disable retry to prevent DOM conflicts\n      refetchOnWindowFocus: false,\n      staleTime: 30000\n    },\n    mutations: {\n      retry: false\n    }\n  }\n});\n\n// 5. FORCE SYNCHRONOUS RENDERING\nconst forceSync = () => {\n  if (window.React && window.React.version) {\n    console.log('‚ö° React version:', window.React.version);\n  }\n\n  // Force synchronous updates (disable concurrent mode)\n  if (window.ReactDOM && window.ReactDOM.createRoot) {\n    console.log('‚ö° Using createRoot (React 18)');\n  }\n};\n\n// 6. EXECUTE CLEANUP\nclearExistingDOM();\nprepareCleanRoot();\nforceSync();\n\n// 7. WAIT FOR DOM TO SETTLE BEFORE RENDERING\nsetTimeout(() => {\n  const rootElement = document.getElementById('root');\n  if (!rootElement) {\n    console.error('‚ùå Root element not found!');\n    return;\n  }\n  console.log('üöÄ Starting React app with clean DOM...');\n  try {\n    // Create fresh root\n    const root = ReactDOM.createRoot(rootElement);\n\n    // Render with absolute minimal structure and force home route\n    root.render(/*#__PURE__*/React.createElement(QueryClientProvider, {\n      client: queryClient\n    }, /*#__PURE__*/React.createElement(BrowserRouter, {\n      basename: '/'\n    },\n    /*#__PURE__*/\n    // Force base route\n    React.createElement(AuthProvider, {}, /*#__PURE__*/React.createElement(App)))));\n    console.log('‚úÖ React app rendered successfully');\n  } catch (error) {\n    console.error('‚ùå Failed to render React app:', error);\n\n    // Fallback: try basic HTML\n    rootElement.innerHTML = `\n      <div style=\"padding: 20px; text-align: center;\">\n        <h1>Loading Error</h1>\n        <p>Failed to load the application. Please refresh the page.</p>\n        <button onclick=\"window.location.reload()\">Refresh Page</button>\n      </div>\n    `;\n  }\n}, 100); // Small delay to ensure DOM is ready\n\nconsole.log('üîÑ DOM REBUILD strategy initialized');","map":{"version":3,"names":["React","ReactDOM","BrowserRouter","QueryClient","QueryClientProvider","App","AuthProvider","initializeLocalStorage","console","log","clearExistingDOM","existingRoots","document","querySelectorAll","forEach","root","remove","portals","portal","modals","modal","overlays","overlay","e","prepareCleanRoot","rootElement","getElementById","innerHTML","attributes","Array","from","attr","name","removeAttribute","style","cssText","originalConsoleError","error","args","message","join","includes","debug","queryClient","defaultOptions","queries","retry","refetchOnWindowFocus","staleTime","mutations","forceSync","window","version","createRoot","setTimeout","render","createElement","client","basename"],"sources":["C:/Users/ACER/Desktop/fe/fe-edu/src/index.js"],"sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from 'react-query';\r\nimport './index.css';\r\nimport App from './App';\r\nimport { AuthProvider } from './context/AuthContext';\r\nimport { initializeLocalStorage } from './utils/localStorageManager';\r\n\r\n// ============================================\r\n// REBUILD DOM STRATEGY + AUTH MANAGEMENT\r\n// ============================================\r\nconsole.log('üîÑ Starting application with clean DOM and auth management...');\r\n\r\n// Initialize localStorage management FIRST\r\ninitializeLocalStorage();\r\n\r\n// 1. CLEAR ALL EXISTING DOM COMPLETELY\r\nconst clearExistingDOM = () => {\r\n  try {\r\n    // Clear all existing React roots\r\n    const existingRoots = document.querySelectorAll('[data-reactroot]');\r\n    existingRoots.forEach(root => root.remove());\r\n    \r\n    // Clear any portal containers\r\n    const portals = document.querySelectorAll('[id*=\"portal\"], [class*=\"portal\"]');\r\n    portals.forEach(portal => portal.remove());\r\n    \r\n    // Clear any modal containers\r\n    const modals = document.querySelectorAll('[id*=\"modal\"], [class*=\"modal\"]');\r\n    modals.forEach(modal => modal.remove());\r\n    \r\n    // Clear any overlay containers\r\n    const overlays = document.querySelectorAll('[class*=\"overlay\"], [id*=\"overlay\"]');\r\n    overlays.forEach(overlay => overlay.remove());\r\n    \r\n    console.log('üßπ DOM cleared completely');\r\n  } catch (e) {\r\n    console.log('üßπ DOM clear completed (with minor errors)');\r\n  }\r\n};\r\n\r\n// 2. FORCE CLEAN THE ROOT ELEMENT\r\nconst prepareCleanRoot = () => {\r\n  const rootElement = document.getElementById('root');\r\n  if (rootElement) {\r\n    // Clear all children\r\n    rootElement.innerHTML = '';\r\n    \r\n    // Remove all attributes except id\r\n    const attributes = Array.from(rootElement.attributes);\r\n    attributes.forEach(attr => {\r\n      if (attr.name !== 'id') {\r\n        rootElement.removeAttribute(attr.name);\r\n      }\r\n    });\r\n    \r\n    // Reset any styles\r\n    rootElement.style.cssText = '';\r\n    \r\n    console.log('üéØ Root element prepared clean');\r\n  }\r\n};\r\n\r\n// 3. MINIMAL ERROR SUPPRESSION (only console)\r\nconst originalConsoleError = console.error;\r\nconsole.error = (...args) => {\r\n  const message = args.join(' ');\r\n  if (message.includes('insertBefore') || \r\n      message.includes('commitPlacement') ||\r\n      message.includes('NotFoundError')) {\r\n    console.debug('üîá DOM error suppressed:', message);\r\n    return;\r\n  }\r\n  originalConsoleError(...args);\r\n};\r\n\r\n// 4. SIMPLE QUERY CLIENT\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: false, // Disable retry to prevent DOM conflicts\r\n      refetchOnWindowFocus: false,\r\n      staleTime: 30000,\r\n    },\r\n    mutations: {\r\n      retry: false,\r\n    }\r\n  },\r\n});\r\n\r\n// 5. FORCE SYNCHRONOUS RENDERING\r\nconst forceSync = () => {\r\n  if (window.React && window.React.version) {\r\n    console.log('‚ö° React version:', window.React.version);\r\n  }\r\n  \r\n  // Force synchronous updates (disable concurrent mode)\r\n  if (window.ReactDOM && window.ReactDOM.createRoot) {\r\n    console.log('‚ö° Using createRoot (React 18)');\r\n  }\r\n};\r\n\r\n// 6. EXECUTE CLEANUP\r\nclearExistingDOM();\r\nprepareCleanRoot();\r\nforceSync();\r\n\r\n// 7. WAIT FOR DOM TO SETTLE BEFORE RENDERING\r\nsetTimeout(() => {\r\n  const rootElement = document.getElementById('root');\r\n  \r\n  if (!rootElement) {\r\n    console.error('‚ùå Root element not found!');\r\n    return;\r\n  }\r\n  \r\n  console.log('üöÄ Starting React app with clean DOM...');\r\n  \r\n  try {\r\n    // Create fresh root\r\n    const root = ReactDOM.createRoot(rootElement);\r\n    \r\n    // Render with absolute minimal structure and force home route\r\n    root.render(\r\n      React.createElement(\r\n        QueryClientProvider,\r\n        { client: queryClient },\r\n        React.createElement(\r\n          BrowserRouter,\r\n          { basename: '/' }, // Force base route\r\n          React.createElement(\r\n            AuthProvider,\r\n            {},\r\n            React.createElement(App)\r\n          )\r\n        )\r\n      )\r\n    );\r\n    \r\n    console.log('‚úÖ React app rendered successfully');\r\n    \r\n  } catch (error) {\r\n    console.error('‚ùå Failed to render React app:', error);\r\n    \r\n    // Fallback: try basic HTML\r\n    rootElement.innerHTML = `\r\n      <div style=\"padding: 20px; text-align: center;\">\r\n        <h1>Loading Error</h1>\r\n        <p>Failed to load the application. Please refresh the page.</p>\r\n        <button onclick=\"window.location.reload()\">Refresh Page</button>\r\n      </div>\r\n    `;\r\n  }\r\n  \r\n}, 100); // Small delay to ensure DOM is ready\r\n\r\nconsole.log('üîÑ DOM REBUILD strategy initialized');"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}