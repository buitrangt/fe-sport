{"ast":null,"code":"var _jsxFileName = \"/Users/Pham13a07/Downloads/fe-sport/src/components/admin/UserManagement.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { Users, Search, Filter, Plus, Edit, Trash2, Eye, Shield, Crown, User, AlertTriangle, Download, Upload, MoreVertical, UserPlus, Key, UserX, UserCheck } from 'lucide-react';\nimport { adminUserService, roleManagementService } from '../../services';\nimport LoadingSpinner from '../LoadingSpinner';\nimport { formatDate } from '../../utils/helpers';\nimport toast from 'react-hot-toast';\nimport UserModal from './UserModal';\nimport UserDetailModal from './UserDetailModal';\nimport ConfirmModal from './ConfirmModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserManagement = () => {\n  _s();\n  var _userStats$data, _userStats$data2, _users$content, _users$content2, _users$content3, _users$content4;\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [page, setPage] = useState(0); // Backend sử dụng phân trang dựa trên 0\n  const [size] = useState(10);\n  const [sortBy, setSortBy] = useState('id');\n  const [sortDirection, setSortDirection] = useState('ASC');\n  const [selectedUsers, setSelectedUsers] = useState([]);\n\n  // Trạng thái Modal\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const queryClient = useQueryClient();\n\n  // Lấy người dùng với phân trang và bộ lọc\n  const {\n    data: usersResponse,\n    isLoading,\n    error\n  } = useQuery(['admin-users', {\n    page,\n    size,\n    sortBy,\n    sortDirection,\n    search: searchTerm,\n    role: roleFilter,\n    isActive: statusFilter\n  }], () => adminUserService.getAllUsers({\n    page,\n    size,\n    sortBy,\n    sortDirection,\n    search: searchTerm || undefined,\n    role: roleFilter || undefined,\n    // Giữ isActive ở đây, vì API của bạn có thể mong đợi tên tham số này cho bộ lọc\n    // Nếu backend của bạn mong đợi 'active', hãy thay đổi thành 'active'\n    isActive: statusFilter !== '' ? statusFilter === 'true' : undefined\n  }), {\n    staleTime: 30 * 1000,\n    // 30 giây\n    keepPreviousData: true,\n    onError: error => {\n      console.error('Lỗi khi tải người dùng:', error);\n      toast.error('Không thể tải người dùng');\n    }\n  });\n\n  // Lấy thống kê người dùng\n  const {\n    data: userStats\n  } = useQuery('user-statistics', () => adminUserService.getUserStatistics(), {\n    staleTime: 5 * 60 * 1000,\n    // 5 phút\n    onError: error => {\n      console.error('Lỗi khi tải thống kê người dùng:', error);\n    }\n  });\n\n  // Lấy vai trò cho dropdown\n  const {\n    data: rolesResponse\n  } = useQuery('roles', () => roleManagementService.getAllRoles(), {\n    staleTime: 10 * 60 * 1000,\n    // 10 phút\n    onError: error => {\n      console.error('Lỗi khi tải vai trò:', error);\n    }\n  });\n\n  // Mutations\n  const createUserMutation = useMutation(userData => adminUserService.createUser(userData), {\n    onSuccess: () => {\n      toast.success('Người dùng đã được tạo thành công');\n      queryClient.invalidateQueries('admin-users');\n      queryClient.invalidateQueries('user-statistics');\n      setIsCreateModalOpen(false);\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể tạo người dùng');\n    }\n  });\n  const updateUserMutation = useMutation(({\n    id,\n    userData\n  }) => adminUserService.updateUser(id, userData), {\n    onSuccess: () => {\n      toast.success('Người dùng đã được cập nhật thành công');\n      queryClient.invalidateQueries('admin-users');\n      setIsEditModalOpen(false);\n      setSelectedUser(null);\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể cập nhật người dùng');\n    }\n  });\n  const deleteUserMutation = useMutation(id => adminUserService.deleteUser(id), {\n    onSuccess: () => {\n      toast.success('Người dùng đã được xóa thành công');\n      queryClient.invalidateQueries('admin-users');\n      queryClient.invalidateQueries('user-statistics');\n      setIsDeleteModalOpen(false);\n      setSelectedUser(null);\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể xóa người dùng');\n    }\n  });\n  const toggleStatusMutation = useMutation(({\n    id,\n    isActive\n  }) => adminUserService.toggleUserStatus(id, isActive), {\n    onSuccess: () => {\n      toast.success('Trạng thái người dùng đã được cập nhật thành công');\n      queryClient.invalidateQueries('admin-users');\n      queryClient.invalidateQueries('user-statistics');\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể cập nhật trạng thái người dùng');\n    }\n  });\n  const resetPasswordMutation = useMutation(({\n    id,\n    newPassword\n  }) => adminUserService.resetUserPassword(id, newPassword), {\n    onSuccess: () => {\n      toast.success('Mật khẩu đã được đặt lại thành công');\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể đặt lại mật khẩu');\n    }\n  });\n  const bulkDeleteMutation = useMutation(userIds => adminUserService.bulkDeleteUsers(userIds), {\n    onSuccess: () => {\n      toast.success(`${selectedUsers.length} người dùng đã được xóa thành công`);\n      queryClient.invalidateQueries('admin-users');\n      queryClient.invalidateQueries('user-statistics');\n      setSelectedUsers([]);\n    },\n    onError: error => {\n      toast.error(error.errorMessage || 'Không thể xóa người dùng');\n    }\n  });\n\n  // Xử lý sự kiện\n  const handleSearch = e => {\n    e.preventDefault();\n    setPage(0); // Đặt lại về trang đầu tiên\n  };\n  const handleSort = field => {\n    if (sortBy === field) {\n      setSortDirection(sortDirection === 'ASC' ? 'DESC' : 'ASC');\n    } else {\n      setSortBy(field);\n      setSortDirection('ASC');\n    }\n    setPage(0);\n  };\n  const handleToggleStatus = user => {\n    toggleStatusMutation.mutate({\n      id: user.id,\n      // Sử dụng user.active từ dữ liệu API để xác định trạng thái hiện tại\n      isActive: !user.active\n    });\n  };\n  const handleEditUser = user => {\n    setSelectedUser(user);\n    setIsEditModalOpen(true);\n  };\n  const handleViewUser = user => {\n    setSelectedUser(user);\n    setIsDetailModalOpen(true);\n  };\n  const handleDeleteUser = user => {\n    setSelectedUser(user);\n    setIsDeleteModalOpen(true);\n  };\n  const handleResetPassword = user => {\n    const newPassword = prompt('Nhập mật khẩu mới cho ' + user.name + ':');\n    if (newPassword && newPassword.length >= 6) {\n      resetPasswordMutation.mutate({\n        id: user.id,\n        newPassword\n      });\n    } else if (newPassword) {\n      toast.error('Mật khẩu phải dài ít nhất 6 ký tự');\n    }\n  };\n  const handleBulkDelete = () => {\n    if (selectedUsers.length === 0) {\n      toast.error('Vui lòng chọn người dùng để xóa');\n      return;\n    }\n    if (window.confirm(`Bạn có chắc chắn muốn xóa ${selectedUsers.length} người dùng này không?`)) {\n      bulkDeleteMutation.mutate(selectedUsers);\n    }\n  };\n  const handleExportUsers = async () => {\n    try {\n      const response = await adminUserService.exportUsers({\n        search: searchTerm || undefined,\n        role: roleFilter || undefined,\n        // Giữ isActive ở đây, vì API của bạn có thể mong đợi tên tham số này cho bộ lọc\n        // Nếu backend của bạn mong đợi 'active', hãy thay đổi thành 'active'\n        isActive: statusFilter !== '' ? statusFilter === 'true' : undefined\n      });\n\n      // Tạo và tải xuống tệp CSV\n      const blob = new Blob([response.data], {\n        type: 'text/csv'\n      });\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `users_export_${new Date().toISOString().split('T')[0]}.csv`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n      toast.success('Người dùng đã được xuất thành công');\n    } catch (error) {\n      toast.error('Không thể xuất người dùng');\n    }\n  };\n  const handleSelectUser = userId => {\n    setSelectedUsers(prev => prev.includes(userId) ? prev.filter(id => id !== userId) : [...prev, userId]);\n  };\n  const handleSelectAll = checked => {\n    if (checked) {\n      var _usersResponse$data, _usersResponse$data$c;\n      setSelectedUsers((usersResponse === null || usersResponse === void 0 ? void 0 : (_usersResponse$data = usersResponse.data) === null || _usersResponse$data === void 0 ? void 0 : (_usersResponse$data$c = _usersResponse$data.content) === null || _usersResponse$data$c === void 0 ? void 0 : _usersResponse$data$c.map(user => user.id)) || []);\n    } else {\n      setSelectedUsers([]);\n    }\n  };\n\n  // Hàm trợ giúp\n  const getRoleIcon = role => {\n    const roleArray = Array.isArray(role) ? role : [role];\n    if (roleArray.includes('ADMIN')) {\n      return /*#__PURE__*/_jsxDEV(Crown, {\n        className: \"h-4 w-4 text-yellow-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 20\n      }, this);\n    } else if (roleArray.includes('ORGANIZER')) {\n      return /*#__PURE__*/_jsxDEV(Shield, {\n        className: \"h-4 w-4 text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(User, {\n        className: \"h-4 w-4 text-gray-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 20\n      }, this);\n    }\n  };\n  const getRoleBadge = roles => {\n    const roleArray = Array.isArray(roles) ? roles : [roles];\n    const primaryRole = roleArray[0];\n    const baseClasses = \"px-2 py-1 rounded-full text-xs font-medium\";\n    switch (primaryRole) {\n      case 'ADMIN':\n        return `${baseClasses} bg-yellow-100 text-yellow-800`;\n      case 'ORGANIZER':\n        return `${baseClasses} bg-blue-100 text-blue-800`;\n      case 'STUDENT':\n        return `${baseClasses} bg-green-100 text-green-800`;\n      default:\n        return `${baseClasses} bg-gray-100 text-gray-800`;\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-8\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"h-12 w-12 text-red-500 mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600\",\n        children: \"L\\u1ED7i khi t\\u1EA3i ng\\u01B0\\u1EDDi d\\xF9ng. Vui l\\xF2ng th\\u1EED l\\u1EA1i sau.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => queryClient.invalidateQueries('admin-users'),\n        className: \"btn-primary mt-4\",\n        children: \"Th\\u1EED l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 13\n    }, this);\n  }\n  const users = usersResponse === null || usersResponse === void 0 ? void 0 : usersResponse.data;\n  const totalUsers = (userStats === null || userStats === void 0 ? void 0 : (_userStats$data = userStats.data) === null || _userStats$data === void 0 ? void 0 : _userStats$data.totalUsers) || 0;\n  const activeUsers = (userStats === null || userStats === void 0 ? void 0 : (_userStats$data2 = userStats.data) === null || _userStats$data2 === void 0 ? void 0 : _userStats$data2.activeUsers) || 0;\n  const availableRoles = (rolesResponse === null || rolesResponse === void 0 ? void 0 : rolesResponse.data) || [];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900\",\n          children: \"Qu\\u1EA3n l\\xFD ng\\u01B0\\u1EDDi d\\xF9ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Qu\\u1EA3n l\\xFD t\\xE0i kho\\u1EA3n ng\\u01B0\\u1EDDi d\\xF9ng, vai tr\\xF2 v\\xE0 quy\\u1EC1n h\\u1EA1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\",\n          children: [totalUsers, \" T\\u1ED5ng s\\u1ED1 ng\\u01B0\\u1EDDi d\\xF9ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium\",\n          children: [activeUsers, \" Ho\\u1EA1t \\u0111\\u1ED9ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsCreateModalOpen(true),\n          className: \"btn-primary\",\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            className: \"h-4 w-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 25\n          }, this), \"Th\\xEAm ng\\u01B0\\u1EDDi d\\xF9ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg border border-gray-200 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"flex flex-col md:flex-row gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"T\\xECm ki\\u1EBFm ng\\u01B0\\u1EDDi d\\xF9ng theo t\\xEAn ho\\u1EB7c email...\",\n              value: searchTerm,\n              onChange: e => setSearchTerm(e.target.value),\n              className: \"pl-10 input-field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            value: roleFilter,\n            onChange: e => setRoleFilter(e.target.value),\n            className: \"input-field min-w-[120px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"T\\u1EA5t c\\u1EA3 vai tr\\xF2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 29\n            }, this), availableRoles.map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: role.name,\n              children: role.name\n            }, role.name, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 33\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: statusFilter,\n            onChange: e => setStatusFilter(e.target.value),\n            className: \"input-field min-w-[120px]\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"T\\u1EA5t c\\u1EA3 tr\\u1EA1ng th\\xE1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"true\",\n              children: \"Ho\\u1EA1t \\u0111\\u1ED9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"false\",\n              children: \"Kh\\xF4ng ho\\u1EA1t \\u0111\\u1ED9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 399,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn-primary whitespace-nowrap\",\n            children: [/*#__PURE__*/_jsxDEV(Filter, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 29\n            }, this), \"\\xC1p d\\u1EE5ng\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 13\n    }, this), selectedUsers.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-blue-50 border border-blue-200 rounded-lg p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-800 font-medium\",\n          children: [\"\\u0110\\xE3 ch\\u1ECDn \", selectedUsers.length, \" ng\\u01B0\\u1EDDi d\\xF9ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleBulkDelete,\n            className: \"btn-secondary text-red-600 hover:bg-red-50\",\n            disabled: bulkDeleteMutation.isLoading,\n            children: [/*#__PURE__*/_jsxDEV(Trash2, {\n              className: \"h-4 w-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 426,\n              columnNumber: 33\n            }, this), \"X\\xF3a \\u0111\\xE3 ch\\u1ECDn\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setSelectedUsers([]),\n            className: \"btn-secondary\",\n            children: \"H\\u1EE7y b\\u1ECF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg border border-gray-200 overflow-hidden\",\n      children: [isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 21\n      }, this) : (users === null || users === void 0 ? void 0 : (_users$content = users.content) === null || _users$content === void 0 ? void 0 : _users$content.length) === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          className: \"h-12 w-12 text-gray-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Kh\\xF4ng t\\xECm th\\u1EA5y ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"overflow-x-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedUsers.length === (users === null || users === void 0 ? void 0 : (_users$content2 = users.content) === null || _users$content2 === void 0 ? void 0 : _users$content2.length) && (users === null || users === void 0 ? void 0 : (_users$content3 = users.content) === null || _users$content3 === void 0 ? void 0 : _users$content3.length) > 0,\n                  onChange: e => handleSelectAll(e.target.checked),\n                  className: \"rounded border-gray-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\",\n                onClick: () => handleSort('name'),\n                children: [\"Ng\\u01B0\\u1EDDi d\\xF9ng \", sortBy === 'name' && (sortDirection === 'ASC' ? '↑' : '↓')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"Vai tr\\xF2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\",\n                onClick: () => handleSort('isActive'),\n                children: [\"Tr\\u1EA1ng th\\xE1i \", sortBy === 'isActive' && (sortDirection === 'ASC' ? '↑' : '↓')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\",\n                onClick: () => handleSort('createdAt'),\n                children: [\"\\u0110\\xE3 t\\u1EA1o \", sortBy === 'createdAt' && (sortDirection === 'ASC' ? '↑' : '↓')]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",\n                children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200\",\n            children: users === null || users === void 0 ? void 0 : (_users$content4 = users.content) === null || _users$content4 === void 0 ? void 0 : _users$content4.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"hover:bg-gray-50\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  checked: selectedUsers.includes(user.id),\n                  onChange: () => handleSelectUser(user.id),\n                  className: \"rounded border-gray-300\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 507,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-shrink-0 h-10 w-10\",\n                    children: user.avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      className: \"h-10 w-10 rounded-full\",\n                      src: user.avatar,\n                      alt: user.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 518,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center\",\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-primary-600 font-medium text-sm\",\n                        children: user.name.charAt(0).toUpperCase()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 521,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 520,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ml-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm font-medium text-gray-900\",\n                      children: user.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 528,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-sm text-gray-500\",\n                      children: user.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 529,\n                      columnNumber: 53\n                    }, this), user.phone && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"text-xs text-gray-400\",\n                      children: user.phone\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 531,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 515,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 514,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [getRoleIcon(user.roles), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: getRoleBadge(user.roles),\n                    children: Array.isArray(user.roles) ? user.roles.join(', ') : user.roles\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 539,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `px-2 py-1 rounded-full text-xs font-medium ${\n                  // Thay đổi từ user.isActive thành user.active\n                  user.active ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n                  children: user.active ? 'Hoạt động' : 'Không hoạt động'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 545,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 544,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",\n                children: formatDate(user.createdAt)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 555,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center justify-end space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleViewUser(user),\n                    className: \"text-gray-600 hover:text-primary-600 transition-colors\",\n                    title: \"Xem chi ti\\u1EBFt\",\n                    children: /*#__PURE__*/_jsxDEV(Eye, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 566,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 561,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleEditUser(user),\n                    className: \"text-gray-600 hover:text-blue-600 transition-colors\",\n                    title: \"Ch\\u1EC9nh s\\u1EEDa ng\\u01B0\\u1EDDi d\\xF9ng\",\n                    children: /*#__PURE__*/_jsxDEV(Edit, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleResetPassword(user),\n                    className: \"text-gray-600 hover:text-purple-600 transition-colors\",\n                    title: \"\\u0110\\u1EB7t l\\u1EA1i m\\u1EADt kh\\u1EA9u\",\n                    children: /*#__PURE__*/_jsxDEV(Key, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 580,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 575,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleToggleStatus(user),\n                    className: `transition-colors ${\n                    // Sử dụng user.active để xác định icon và màu sắc\n                    user.active ? 'text-gray-600 hover:text-red-600' : 'text-gray-600 hover:text-green-600'}`,\n                    title: user.active ? 'Vô hiệu hóa' : 'Kích hoạt',\n                    disabled: toggleStatusMutation.isLoading,\n                    children: user.active ? /*#__PURE__*/_jsxDEV(UserX, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 595,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(UserCheck, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 597,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 582,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleDeleteUser(user),\n                    className: \"text-gray-600 hover:text-red-600 transition-colors\",\n                    title: \"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\",\n                    disabled: deleteUserMutation.isLoading,\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"h-4 w-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 606,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 600,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 560,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 41\n              }, this)]\n            }, user.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 21\n      }, this), users && users.totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white px-4 py-3 border-t border-gray-200 sm:px-6\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-700\",\n            children: [\"Hi\\u1EC3n th\\u1ECB t\\u1EEB \", users.page * users.size + 1, \" \\u0111\\u1EBFn \", Math.min((users.page + 1) * users.size, users.totalElements), \" tr\\xEAn t\\u1ED5ng s\\u1ED1 \", users.totalElements, \" k\\u1EBFt qu\\u1EA3\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPage(page - 1),\n              disabled: users.first,\n              className: \"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: \"Tr\\u01B0\\u1EDBc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"px-3 py-2 text-sm text-gray-700\",\n              children: [\"Trang \", page + 1, \" tr\\xEAn \", users.totalPages]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPage(page + 1),\n              disabled: users.last,\n              className: \"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: \"Ti\\u1EBFp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 13\n    }, this), isCreateModalOpen && /*#__PURE__*/_jsxDEV(UserModal, {\n      isOpen: isCreateModalOpen,\n      onClose: () => setIsCreateModalOpen(false),\n      onSubmit: userData => createUserMutation.mutate(userData),\n      isLoading: createUserMutation.isLoading,\n      availableRoles: availableRoles,\n      title: \"T\\u1EA1o ng\\u01B0\\u1EDDi d\\xF9ng m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 17\n    }, this), isEditModalOpen && selectedUser && /*#__PURE__*/_jsxDEV(UserModal, {\n      isOpen: isEditModalOpen,\n      onClose: () => {\n        setIsEditModalOpen(false);\n        setSelectedUser(null);\n      },\n      onSubmit: userData => updateUserMutation.mutate({\n        id: selectedUser.id,\n        userData\n      }),\n      isLoading: updateUserMutation.isLoading,\n      availableRoles: availableRoles,\n      initialData: selectedUser,\n      title: \"Ch\\u1EC9nh s\\u1EEDa ng\\u01B0\\u1EDDi d\\xF9ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 17\n    }, this), isDetailModalOpen && selectedUser && /*#__PURE__*/_jsxDEV(UserDetailModal, {\n      isOpen: isDetailModalOpen,\n      onClose: () => {\n        setIsDetailModalOpen(false);\n        setSelectedUser(null);\n      },\n      user: selectedUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 17\n    }, this), isDeleteModalOpen && selectedUser && /*#__PURE__*/_jsxDEV(ConfirmModal, {\n      isOpen: isDeleteModalOpen,\n      onClose: () => {\n        setIsDeleteModalOpen(false);\n        setSelectedUser(null);\n      },\n      onConfirm: () => deleteUserMutation.mutate(selectedUser.id),\n      isLoading: deleteUserMutation.isLoading,\n      title: \"X\\xF3a ng\\u01B0\\u1EDDi d\\xF9ng\",\n      message: `Bạn có chắc chắn muốn xóa \"${selectedUser.name}\"? Hành động này không thể hoàn tác.`,\n      confirmText: \"X\\xF3a\",\n      confirmButtonClass: \"btn-danger\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 687,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 9\n  }, this);\n};\n_s(UserManagement, \"PAaUwDMCI7jqsyHvTYn9KX1OvNI=\", false, function () {\n  return [useQueryClient, useQuery, useQuery, useQuery, useMutation, useMutation, useMutation, useMutation, useMutation, useMutation];\n});\n_c = UserManagement;\nexport default UserManagement;\nvar _c;\n$RefreshReg$(_c, \"UserManagement\");","map":{"version":3,"names":["React","useState","useQuery","useMutation","useQueryClient","Users","Search","Filter","Plus","Edit","Trash2","Eye","Shield","Crown","User","AlertTriangle","Download","Upload","MoreVertical","UserPlus","Key","UserX","UserCheck","adminUserService","roleManagementService","LoadingSpinner","formatDate","toast","UserModal","UserDetailModal","ConfirmModal","jsxDEV","_jsxDEV","UserManagement","_s","_userStats$data","_userStats$data2","_users$content","_users$content2","_users$content3","_users$content4","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","page","setPage","size","sortBy","setSortBy","sortDirection","setSortDirection","selectedUsers","setSelectedUsers","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","isDetailModalOpen","setIsDetailModalOpen","isDeleteModalOpen","setIsDeleteModalOpen","selectedUser","setSelectedUser","queryClient","data","usersResponse","isLoading","error","search","role","isActive","getAllUsers","undefined","staleTime","keepPreviousData","onError","console","userStats","getUserStatistics","rolesResponse","getAllRoles","createUserMutation","userData","createUser","onSuccess","success","invalidateQueries","errorMessage","updateUserMutation","id","updateUser","deleteUserMutation","deleteUser","toggleStatusMutation","toggleUserStatus","resetPasswordMutation","newPassword","resetUserPassword","bulkDeleteMutation","userIds","bulkDeleteUsers","length","handleSearch","e","preventDefault","handleSort","field","handleToggleStatus","user","mutate","active","handleEditUser","handleViewUser","handleDeleteUser","handleResetPassword","prompt","name","handleBulkDelete","window","confirm","handleExportUsers","response","exportUsers","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","split","body","appendChild","click","revokeObjectURL","removeChild","handleSelectUser","userId","prev","includes","filter","handleSelectAll","checked","_usersResponse$data","_usersResponse$data$c","content","map","getRoleIcon","roleArray","Array","isArray","className","fileName","_jsxFileName","lineNumber","columnNumber","getRoleBadge","roles","primaryRole","baseClasses","children","onClick","users","totalUsers","activeUsers","availableRoles","onSubmit","placeholder","value","onChange","target","disabled","avatar","src","alt","charAt","toUpperCase","email","phone","join","createdAt","title","totalPages","Math","min","totalElements","first","last","isOpen","onClose","initialData","onConfirm","message","confirmText","confirmButtonClass","_c","$RefreshReg$"],"sources":["/Users/Pham13a07/Downloads/fe-sport/src/components/admin/UserManagement.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport {\n    Users,\n    Search,\n    Filter,\n    Plus,\n    Edit,\n    Trash2,\n    Eye,\n    Shield,\n    Crown,\n    User,\n    AlertTriangle,\n    Download,\n    Upload,\n    MoreVertical,\n    UserPlus,\n    Key,\n    UserX,\n    UserCheck\n} from 'lucide-react';\nimport { adminUserService, roleManagementService } from '../../services';\nimport LoadingSpinner from '../LoadingSpinner';\nimport { formatDate } from '../../utils/helpers';\nimport toast from 'react-hot-toast';\nimport UserModal from './UserModal';\nimport UserDetailModal from './UserDetailModal';\nimport ConfirmModal from './ConfirmModal';\n\nconst UserManagement = () => {\n    const [searchTerm, setSearchTerm] = useState('');\n    const [roleFilter, setRoleFilter] = useState('');\n    const [statusFilter, setStatusFilter] = useState('');\n    const [page, setPage] = useState(0); // Backend sử dụng phân trang dựa trên 0\n    const [size] = useState(10);\n    const [sortBy, setSortBy] = useState('id');\n    const [sortDirection, setSortDirection] = useState('ASC');\n    const [selectedUsers, setSelectedUsers] = useState([]);\n\n    // Trạng thái Modal\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n    const [selectedUser, setSelectedUser] = useState(null);\n\n    const queryClient = useQueryClient();\n\n    // Lấy người dùng với phân trang và bộ lọc\n    const { data: usersResponse, isLoading, error } = useQuery(\n        ['admin-users', { page, size, sortBy, sortDirection, search: searchTerm, role: roleFilter, isActive: statusFilter }],\n        () => adminUserService.getAllUsers({\n            page,\n            size,\n            sortBy,\n            sortDirection,\n            search: searchTerm || undefined,\n            role: roleFilter || undefined,\n            // Giữ isActive ở đây, vì API của bạn có thể mong đợi tên tham số này cho bộ lọc\n            // Nếu backend của bạn mong đợi 'active', hãy thay đổi thành 'active'\n            isActive: statusFilter !== '' ? statusFilter === 'true' : undefined\n        }),\n        {\n            staleTime: 30 * 1000, // 30 giây\n            keepPreviousData: true,\n            onError: (error) => {\n                console.error('Lỗi khi tải người dùng:', error);\n                toast.error('Không thể tải người dùng');\n            }\n        }\n    );\n\n    // Lấy thống kê người dùng\n    const { data: userStats } = useQuery(\n        'user-statistics',\n        () => adminUserService.getUserStatistics(),\n        {\n            staleTime: 5 * 60 * 1000, // 5 phút\n            onError: (error) => {\n                console.error('Lỗi khi tải thống kê người dùng:', error);\n            }\n        }\n    );\n\n    // Lấy vai trò cho dropdown\n    const { data: rolesResponse } = useQuery(\n        'roles',\n        () => roleManagementService.getAllRoles(),\n        {\n            staleTime: 10 * 60 * 1000, // 10 phút\n            onError: (error) => {\n                console.error('Lỗi khi tải vai trò:', error);\n            }\n        }\n    );\n\n    // Mutations\n    const createUserMutation = useMutation(\n        (userData) => adminUserService.createUser(userData),\n        {\n            onSuccess: () => {\n                toast.success('Người dùng đã được tạo thành công');\n                queryClient.invalidateQueries('admin-users');\n                queryClient.invalidateQueries('user-statistics');\n                setIsCreateModalOpen(false);\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể tạo người dùng');\n            }\n        }\n    );\n\n    const updateUserMutation = useMutation(\n        ({ id, userData }) => adminUserService.updateUser(id, userData),\n        {\n            onSuccess: () => {\n                toast.success('Người dùng đã được cập nhật thành công');\n                queryClient.invalidateQueries('admin-users');\n                setIsEditModalOpen(false);\n                setSelectedUser(null);\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể cập nhật người dùng');\n            }\n        }\n    );\n\n    const deleteUserMutation = useMutation(\n        (id) => adminUserService.deleteUser(id),\n        {\n            onSuccess: () => {\n                toast.success('Người dùng đã được xóa thành công');\n                queryClient.invalidateQueries('admin-users');\n                queryClient.invalidateQueries('user-statistics');\n                setIsDeleteModalOpen(false);\n                setSelectedUser(null);\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể xóa người dùng');\n            }\n        }\n    );\n\n    const toggleStatusMutation = useMutation(\n        ({ id, isActive }) => adminUserService.toggleUserStatus(id, isActive),\n        {\n            onSuccess: () => {\n                toast.success('Trạng thái người dùng đã được cập nhật thành công');\n                queryClient.invalidateQueries('admin-users');\n                queryClient.invalidateQueries('user-statistics');\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể cập nhật trạng thái người dùng');\n            }\n        }\n    );\n\n    const resetPasswordMutation = useMutation(\n        ({ id, newPassword }) => adminUserService.resetUserPassword(id, newPassword),\n        {\n            onSuccess: () => {\n                toast.success('Mật khẩu đã được đặt lại thành công');\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể đặt lại mật khẩu');\n            }\n        }\n    );\n\n    const bulkDeleteMutation = useMutation(\n        (userIds) => adminUserService.bulkDeleteUsers(userIds),\n        {\n            onSuccess: () => {\n                toast.success(`${selectedUsers.length} người dùng đã được xóa thành công`);\n                queryClient.invalidateQueries('admin-users');\n                queryClient.invalidateQueries('user-statistics');\n                setSelectedUsers([]);\n            },\n            onError: (error) => {\n                toast.error(error.errorMessage || 'Không thể xóa người dùng');\n            }\n        }\n    );\n\n    // Xử lý sự kiện\n    const handleSearch = (e) => {\n        e.preventDefault();\n        setPage(0); // Đặt lại về trang đầu tiên\n    };\n\n    const handleSort = (field) => {\n        if (sortBy === field) {\n            setSortDirection(sortDirection === 'ASC' ? 'DESC' : 'ASC');\n        } else {\n            setSortBy(field);\n            setSortDirection('ASC');\n        }\n        setPage(0);\n    };\n\n    const handleToggleStatus = (user) => {\n        toggleStatusMutation.mutate({\n            id: user.id,\n            // Sử dụng user.active từ dữ liệu API để xác định trạng thái hiện tại\n            isActive: !user.active \n        });\n    };\n\n    const handleEditUser = (user) => {\n        setSelectedUser(user);\n        setIsEditModalOpen(true);\n    };\n\n    const handleViewUser = (user) => {\n        setSelectedUser(user);\n        setIsDetailModalOpen(true);\n    };\n\n    const handleDeleteUser = (user) => {\n        setSelectedUser(user);\n        setIsDeleteModalOpen(true);\n    };\n\n    const handleResetPassword = (user) => {\n        const newPassword = prompt('Nhập mật khẩu mới cho ' + user.name + ':');\n        if (newPassword && newPassword.length >= 6) {\n            resetPasswordMutation.mutate({\n                id: user.id,\n                newPassword\n            });\n        } else if (newPassword) {\n            toast.error('Mật khẩu phải dài ít nhất 6 ký tự');\n        }\n    };\n\n    const handleBulkDelete = () => {\n        if (selectedUsers.length === 0) {\n            toast.error('Vui lòng chọn người dùng để xóa');\n            return;\n        }\n        if (window.confirm(`Bạn có chắc chắn muốn xóa ${selectedUsers.length} người dùng này không?`)) {\n            bulkDeleteMutation.mutate(selectedUsers);\n        }\n    };\n\n    const handleExportUsers = async () => {\n        try {\n            const response = await adminUserService.exportUsers({\n                search: searchTerm || undefined,\n                role: roleFilter || undefined,\n                // Giữ isActive ở đây, vì API của bạn có thể mong đợi tên tham số này cho bộ lọc\n                // Nếu backend của bạn mong đợi 'active', hãy thay đổi thành 'active'\n                isActive: statusFilter !== '' ? statusFilter === 'true' : undefined\n            });\n\n            // Tạo và tải xuống tệp CSV\n            const blob = new Blob([response.data], { type: 'text/csv' });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `users_export_${new Date().toISOString().split('T')[0]}.csv`;\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n\n            toast.success('Người dùng đã được xuất thành công');\n        } catch (error) {\n            toast.error('Không thể xuất người dùng');\n        }\n    };\n\n    const handleSelectUser = (userId) => {\n        setSelectedUsers(prev =>\n            prev.includes(userId)\n                ? prev.filter(id => id !== userId)\n                : [...prev, userId]\n        );\n    };\n\n    const handleSelectAll = (checked) => {\n        if (checked) {\n            setSelectedUsers(usersResponse?.data?.content?.map(user => user.id) || []);\n        } else {\n            setSelectedUsers([]);\n        }\n    };\n\n    // Hàm trợ giúp\n    const getRoleIcon = (role) => {\n        const roleArray = Array.isArray(role) ? role : [role];\n        if (roleArray.includes('ADMIN')) {\n            return <Crown className=\"h-4 w-4 text-yellow-500\" />;\n        } else if (roleArray.includes('ORGANIZER')) {\n            return <Shield className=\"h-4 w-4 text-blue-500\" />;\n        } else {\n            return <User className=\"h-4 w-4 text-gray-500\" />;\n        }\n    };\n\n    const getRoleBadge = (roles) => {\n        const roleArray = Array.isArray(roles) ? roles : [roles];\n        const primaryRole = roleArray[0];\n        const baseClasses = \"px-2 py-1 rounded-full text-xs font-medium\";\n\n        switch (primaryRole) {\n            case 'ADMIN':\n                return `${baseClasses} bg-yellow-100 text-yellow-800`;\n            case 'ORGANIZER':\n                return `${baseClasses} bg-blue-100 text-blue-800`;\n            case 'STUDENT':\n                return `${baseClasses} bg-green-100 text-green-800`;\n            default:\n                return `${baseClasses} bg-gray-100 text-gray-800`;\n        }\n    };\n\n    if (error) {\n        return (\n            <div className=\"text-center py-8\">\n                <AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\n                <p className=\"text-red-600\">Lỗi khi tải người dùng. Vui lòng thử lại sau.</p>\n                <button\n                    onClick={() => queryClient.invalidateQueries('admin-users')}\n                    className=\"btn-primary mt-4\"\n                >\n                    Thử lại\n                </button>\n            </div>\n        );\n    }\n\n    const users = usersResponse?.data;\n    const totalUsers = userStats?.data?.totalUsers || 0;\n    const activeUsers = userStats?.data?.activeUsers || 0;\n    const availableRoles = rolesResponse?.data || [];\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Phần đầu với Thống kê */}\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Quản lý người dùng</h2>\n                    <p className=\"text-gray-600\">Quản lý tài khoản người dùng, vai trò và quyền hạn</p>\n                </div>\n                <div className=\"flex items-center space-x-3\">\n                    <div className=\"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium\">\n                        {totalUsers} Tổng số người dùng\n                    </div>\n                    <div className=\"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium\">\n                        {activeUsers} Hoạt động\n                    </div>\n                    <button\n                        onClick={() => setIsCreateModalOpen(true)}\n                        className=\"btn-primary\"\n                    >\n                        <Plus className=\"h-4 w-4 mr-2\" />\n                        Thêm người dùng\n                    </button>\n                </div>\n            </div>\n\n            {/* Tìm kiếm và Bộ lọc */}\n            <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n                <form onSubmit={handleSearch} className=\"flex flex-col md:flex-row gap-4\">\n                    <div className=\"flex-1\">\n                        <div className=\"relative\">\n                            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5\" />\n                            <input\n                                type=\"text\"\n                                placeholder=\"Tìm kiếm người dùng theo tên hoặc email...\"\n                                value={searchTerm}\n                                onChange={(e) => setSearchTerm(e.target.value)}\n                                className=\"pl-10 input-field\"\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"flex gap-4\">\n                        <select\n                            value={roleFilter}\n                            onChange={(e) => setRoleFilter(e.target.value)}\n                            className=\"input-field min-w-[120px]\"\n                        >\n                            <option value=\"\">Tất cả vai trò</option>\n                            {availableRoles.map((role) => (\n                                <option key={role.name} value={role.name}>{role.name}</option>\n                            ))}\n                        </select>\n\n                        <select\n                            value={statusFilter}\n                            onChange={(e) => setStatusFilter(e.target.value)}\n                            className=\"input-field min-w-[120px]\"\n                        >\n                            <option value=\"\">Tất cả trạng thái</option>\n                            <option value=\"true\">Hoạt động</option>\n                            <option value=\"false\">Không hoạt động</option>\n                        </select>\n\n                        <button\n                            type=\"submit\"\n                            className=\"btn-primary whitespace-nowrap\"\n                        >\n                            <Filter className=\"h-4 w-4 mr-2\" />\n                            Áp dụng\n                        </button>\n                    </div>\n                </form>\n            </div>\n\n            {/* Thanh hành động */}\n            {selectedUsers.length > 0 && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                        <span className=\"text-blue-800 font-medium\">\n                            Đã chọn {selectedUsers.length} người dùng\n                        </span>\n                        <div className=\"flex space-x-2\">\n                            <button\n                                onClick={handleBulkDelete}\n                                className=\"btn-secondary text-red-600 hover:bg-red-50\"\n                                disabled={bulkDeleteMutation.isLoading}\n                            >\n                                <Trash2 className=\"h-4 w-4 mr-2\" />\n                                Xóa đã chọn\n                            </button>\n                            <button\n                                onClick={() => setSelectedUsers([])}\n                                className=\"btn-secondary\"\n                            >\n                                Hủy bỏ\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Nút xuất */}\n            {/* Nếu bạn muốn dùng lại, chỉ cần bỏ comment */}\n            {/* <div className=\"flex justify-end\">\n                <button\n                    onClick={handleExportUsers}\n                    className=\"btn-secondary\"\n                >\n                    <Download className=\"h-4 w-4 mr-2\" />\n                    Xuất CSV\n                </button>\n            </div> */}\n\n            {/* Bảng người dùng */}\n            <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\n                {isLoading ? (\n                    <div className=\"p-8 text-center\">\n                        <LoadingSpinner />\n                    </div>\n                ) : users?.content?.length === 0 ? (\n                    <div className=\"p-8 text-center\">\n                        <Users className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n                        <p className=\"text-gray-600\">Không tìm thấy người dùng nào</p>\n                    </div>\n                ) : (\n                    <div className=\"overflow-x-auto\">\n                        <table className=\"min-w-full divide-y divide-gray-200\">\n                            <thead className=\"bg-gray-50\">\n                                <tr>\n                                    <th className=\"px-6 py-3 text-left\">\n                                        <input\n                                            type=\"checkbox\"\n                                            checked={selectedUsers.length === users?.content?.length && users?.content?.length > 0}\n                                            onChange={(e) => handleSelectAll(e.target.checked)}\n                                            className=\"rounded border-gray-300\"\n                                        />\n                                    </th>\n                                    <th\n                                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\n                                        onClick={() => handleSort('name')}\n                                    >\n                                        Người dùng {sortBy === 'name' && (sortDirection === 'ASC' ? '↑' : '↓')}\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                                        Vai trò\n                                    </th>\n                                    <th\n                                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\n                                        onClick={() => handleSort('isActive')}\n                                    >\n                                        Trạng thái {sortBy === 'isActive' && (sortDirection === 'ASC' ? '↑' : '↓')}\n                                    </th>\n                                    <th\n                                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\n                                        onClick={() => handleSort('createdAt')}\n                                    >\n                                        Đã tạo {sortBy === 'createdAt' && (sortDirection === 'ASC' ? '↑' : '↓')}\n                                    </th>\n                                    {/* Cột \"Đăng nhập lần cuối\" đã bị xóa như yêu cầu trước đó */}\n                                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                                        Hành động\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-white divide-y divide-gray-200\">\n                                {users?.content?.map((user) => (\n                                    <tr key={user.id} className=\"hover:bg-gray-50\">\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={selectedUsers.includes(user.id)}\n                                                onChange={() => handleSelectUser(user.id)}\n                                                className=\"rounded border-gray-300\"\n                                            />\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <div className=\"flex items-center\">\n                                                <div className=\"flex-shrink-0 h-10 w-10\">\n                                                    {user.avatar ? (\n                                                        <img className=\"h-10 w-10 rounded-full\" src={user.avatar} alt={user.name} />\n                                                    ) : (\n                                                        <div className=\"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center\">\n                                                            <span className=\"text-primary-600 font-medium text-sm\">\n                                                                {user.name.charAt(0).toUpperCase()}\n                                                            </span>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                                <div className=\"ml-4\">\n                                                    <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\n                                                    <div className=\"text-sm text-gray-500\">{user.email}</div>\n                                                    {user.phone && (\n                                                        <div className=\"text-xs text-gray-400\">{user.phone}</div>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <div className=\"flex items-center space-x-2\">\n                                                {getRoleIcon(user.roles)}\n                                                <span className={getRoleBadge(user.roles)}>\n                                                    {Array.isArray(user.roles) ? user.roles.join(', ') : user.roles}\n                                                </span>\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                                                // Thay đổi từ user.isActive thành user.active\n                                                user.active\n                                                    ? 'bg-green-100 text-green-800'\n                                                    : 'bg-red-100 text-red-800'\n                                            }`}>\n                                                {/* Thay đổi từ user.isActive thành user.active */}\n                                                {user.active ? 'Hoạt động' : 'Không hoạt động'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                                            {formatDate(user.createdAt)}\n                                        </td>\n                                        {/* Cột \"Đăng nhập lần cuối\" đã bị xóa ở đây */}\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                                            <div className=\"flex items-center justify-end space-x-2\">\n                                                <button\n                                                    onClick={() => handleViewUser(user)}\n                                                    className=\"text-gray-600 hover:text-primary-600 transition-colors\"\n                                                    title=\"Xem chi tiết\"\n                                                >\n                                                    <Eye className=\"h-4 w-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() => handleEditUser(user)}\n                                                    className=\"text-gray-600 hover:text-blue-600 transition-colors\"\n                                                    title=\"Chỉnh sửa người dùng\"\n                                                >\n                                                    <Edit className=\"h-4 w-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() => handleResetPassword(user)}\n                                                    className=\"text-gray-600 hover:text-purple-600 transition-colors\"\n                                                    title=\"Đặt lại mật khẩu\"\n                                                >\n                                                    <Key className=\"h-4 w-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() => handleToggleStatus(user)}\n                                                    className={`transition-colors ${\n                                                        // Sử dụng user.active để xác định icon và màu sắc\n                                                        user.active\n                                                            ? 'text-gray-600 hover:text-red-600'\n                                                            : 'text-gray-600 hover:text-green-600'\n                                                    }`}\n                                                    title={user.active ? 'Vô hiệu hóa' : 'Kích hoạt'}\n                                                    disabled={toggleStatusMutation.isLoading}\n                                                >\n                                                    {/* Sử dụng user.active để hiển thị icon */}\n                                                    {user.active ? (\n                                                        <UserX className=\"h-4 w-4\" />\n                                                    ) : (\n                                                        <UserCheck className=\"h-4 w-4\" />\n                                                    )}\n                                                </button>\n                                                <button\n                                                    onClick={() => handleDeleteUser(user)}\n                                                    className=\"text-gray-600 hover:text-red-600 transition-colors\"\n                                                    title=\"Xóa người dùng\"\n                                                    disabled={deleteUserMutation.isLoading}\n                                                >\n                                                    <Trash2 className=\"h-4 w-4\" />\n                                                </button>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n\n                {/* Phân trang */}\n                {users && users.totalPages > 1 && (\n                    <div className=\"bg-white px-4 py-3 border-t border-gray-200 sm:px-6\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"text-sm text-gray-700\">\n                                Hiển thị từ {users.page * users.size + 1} đến {Math.min((users.page + 1) * users.size, users.totalElements)} trên tổng số {users.totalElements} kết quả\n                            </div>\n                            <div className=\"flex space-x-2\">\n                                <button\n                                    onClick={() => setPage(page - 1)}\n                                    disabled={users.first}\n                                    className=\"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n                                >\n                                    Trước\n                                </button>\n                                <span className=\"px-3 py-2 text-sm text-gray-700\">\n                                    Trang {page + 1} trên {users.totalPages}\n                                </span>\n                                <button\n                                    onClick={() => setPage(page + 1)}\n                                    disabled={users.last}\n                                    className=\"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed\"\n                                >\n                                    Tiếp\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Modals */}\n            {isCreateModalOpen && (\n                <UserModal\n                    isOpen={isCreateModalOpen}\n                    onClose={() => setIsCreateModalOpen(false)}\n                    onSubmit={(userData) => createUserMutation.mutate(userData)}\n                    isLoading={createUserMutation.isLoading}\n                    availableRoles={availableRoles}\n                    title=\"Tạo người dùng mới\"\n                />\n            )}\n\n            {isEditModalOpen && selectedUser && (\n                <UserModal\n                    isOpen={isEditModalOpen}\n                    onClose={() => {\n                        setIsEditModalOpen(false);\n                        setSelectedUser(null);\n                    }}\n                    onSubmit={(userData) => updateUserMutation.mutate({ id: selectedUser.id, userData })}\n                    isLoading={updateUserMutation.isLoading}\n                    availableRoles={availableRoles}\n                    initialData={selectedUser}\n                    title=\"Chỉnh sửa người dùng\"\n                />\n            )}\n\n            {isDetailModalOpen && selectedUser && (\n                <UserDetailModal\n                    isOpen={isDetailModalOpen}\n                    onClose={() => {\n                        setIsDetailModalOpen(false);\n                        setSelectedUser(null);\n                    }}\n                    user={selectedUser}\n                />\n            )}\n\n            {isDeleteModalOpen && selectedUser && (\n                <ConfirmModal\n                    isOpen={isDeleteModalOpen}\n                    onClose={() => {\n                        setIsDeleteModalOpen(false);\n                        setSelectedUser(null);\n                    }}\n                    onConfirm={() => deleteUserMutation.mutate(selectedUser.id)}\n                    isLoading={deleteUserMutation.isLoading}\n                    title=\"Xóa người dùng\"\n                    message={`Bạn có chắc chắn muốn xóa \"${selectedUser.name}\"? Hành động này không thể hoàn tác.`}\n                    confirmText=\"Xóa\"\n                    confirmButtonClass=\"btn-danger\"\n                />\n            )}\n        </div>\n    );\n};\n\nexport default UserManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}