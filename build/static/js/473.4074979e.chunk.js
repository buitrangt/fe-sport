"use strict";(self.webpackChunkedusports_frontend=self.webpackChunkedusports_frontend||[]).push([[473],{473:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var a=t(5043),r=t(2907),l=t(5489),i=t(2699),n=t(2817),c=t(2543),d=t(2380),o=t(9256),x=t(1490),m=t(6339),u=t(3797);const h=(0,u.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var p=t(8112),y=t(8775),g=t(6787);const j=(0,u.A)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),v=(0,u.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var N=t(622),b=t(407),f=t(9144),w=t(5955),A=t(2339),k=t(8),C=t(1172),S=t(9589),U=t(5923),E=t(5680),D=t(579);const L=e=>{let{isOpen:s,onClose:t,onSubmit:r,isLoading:l,availableRoles:i=[],initialData:c=null,title:d="User Form"}=e;const[o,x]=(0,a.useState)({name:"",email:"",password:"",phone:"",roles:["STUDENT"],isActive:!0,avatar:""}),[m,u]=(0,a.useState)(!1),[h,p]=(0,a.useState)({}),g=!!c;(0,a.useEffect)((()=>{var e;c?x({name:c.name||"",email:c.email||"",password:"",phone:c.phone||"",roles:Array.isArray(c.roles)?c.roles:[c.roles||"STUDENT"],isActive:null===(e=c.isActive)||void 0===e||e,avatar:c.avatar||""}):x({name:"",email:"",password:"",phone:"",roles:["STUDENT"],isActive:!0,avatar:""});p({})}),[c,s]);const j=(e,s)=>{x((t=>(0,k.A)((0,k.A)({},t),{},{[e]:s}))),h[e]&&p((s=>(0,k.A)((0,k.A)({},s),{},{[e]:""})))},v=(e,s)=>{x((t=>{const a=s?[...t.roles,e]:t.roles.filter((s=>s!==e));return(0,k.A)((0,k.A)({},t),{},{roles:a})}))};return s?(0,D.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,D.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,D.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),(0,D.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:d}),(0,D.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,D.jsx)(C.A,{className:"h-5 w-5"})})]}),(0,D.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};return o.name.trim()?o.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Name is required",o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(e.email="Please enter a valid email address"):e.email="Email is required",g||o.password?o.password&&o.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",o.phone&&!/^[\d+\-\s()]+$/.test(o.phone)&&(e.phone="Please enter a valid phone number"),o.roles&&0!==o.roles.length||(e.roles="At least one role is required"),p(e),0===Object.keys(e).length})())return void A.Ay.error("Please fix the form errors");const s=(0,k.A)({},o);g&&!s.password&&delete s.password,s.avatar||delete s.avatar,s.phone||delete s.phone,r(s)},className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,D.jsx)("input",{type:"text",value:o.name,onChange:e=>j("name",e.target.value),className:"pl-10 input-field ".concat(h.name?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"Enter full name",disabled:l})]}),h.name&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(S.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,D.jsx)("input",{type:"email",value:o.email,onChange:e=>j("email",e.target.value),className:"pl-10 input-field ".concat(h.email?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"Enter email address",disabled:l})]}),h.email&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.email})]}),(0,D.jsxs)("div",{children:[(0,D.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!g&&"*",g&&(0,D.jsx)("span",{className:"text-gray-500 text-xs",children:" (leave empty to keep current)"})]}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)("input",{type:m?"text":"password",value:o.password,onChange:e=>j("password",e.target.value),className:"input-field pr-10 ".concat(h.password?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:g?"Enter new password":"Enter password",disabled:l}),(0,D.jsx)("button",{type:"button",onClick:()=>u(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?(0,D.jsx)(U.A,{className:"h-5 w-5"}):(0,D.jsx)(y.A,{className:"h-5 w-5"})})]}),h.password&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(E.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,D.jsx)("input",{type:"tel",value:o.phone,onChange:e=>j("phone",e.target.value),className:"pl-10 input-field ".concat(h.phone?"border-red-300 focus:border-red-500 focus:ring-red-500":""),placeholder:"Enter phone number",disabled:l})]}),h.phone&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles *"}),(0,D.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto border rounded-md p-3",children:i.length>0?i.map((e=>(0,D.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,D.jsx)("input",{type:"checkbox",checked:o.roles.includes(e.name||e),onChange:s=>v(e.name||e,s.target.checked),className:"rounded border-gray-300",disabled:l}),(0,D.jsx)("span",{className:"text-sm text-gray-700",children:e.name||e}),void 0!==e.userCount&&(0,D.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.userCount," users)"]})]},e.name||e))):["ADMIN","ORGANIZER","STUDENT"].map((e=>(0,D.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,D.jsx)("input",{type:"checkbox",checked:o.roles.includes(e),onChange:s=>v(e,s.target.checked),className:"rounded border-gray-300",disabled:l}),(0,D.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e)))}),h.roles&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.roles})]}),(0,D.jsx)("div",{children:(0,D.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,D.jsx)("input",{type:"checkbox",checked:o.isActive,onChange:e=>j("isActive",e.target.checked),className:"rounded border-gray-300",disabled:l}),(0,D.jsx)("span",{className:"text-sm text-gray-700",children:"Active user account"})]})}),(0,D.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,D.jsx)("button",{type:"button",onClick:t,className:"btn-secondary",disabled:l,children:"Cancel"}),(0,D.jsx)("button",{type:"submit",className:"btn-primary",disabled:l,children:l?(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),g?"Updating...":"Creating..."]}):g?"Update User":"Create User"})]})]})]})]})}):null};var M=t(2938);const R=(0,u.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),P=e=>{var s,t;let{isOpen:a,onClose:r,user:c}=e;if(!a||!c)return null;const d=e=>(Array.isArray(e)?e:[e]).map(((e,s)=>{let t;switch(e){case"ADMIN":t="bg-yellow-100 text-yellow-800";break;case"ORGANIZER":t="bg-blue-100 text-blue-800";break;case"STUDENT":t="bg-green-100 text-green-800";break;default:t="bg-gray-100 text-gray-800"}return(0,D.jsx)("span",{className:"".concat("px-2 py-1 rounded-full text-xs font-medium"," ").concat(t),children:e},e)}));return(0,D.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,D.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,D.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:r}),(0,D.jsxs)("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"User Details"}),(0,D.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,D.jsx)(C.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-6 mb-8 p-6 bg-gray-50 rounded-lg",children:[(0,D.jsx)("div",{className:"flex-shrink-0",children:c.avatar?(0,D.jsx)("img",{className:"h-20 w-20 rounded-full object-cover",src:c.avatar,alt:c.name}):(0,D.jsx)("div",{className:"h-20 w-20 rounded-full bg-primary-100 flex items-center justify-center",children:(0,D.jsx)("span",{className:"text-primary-600 font-semibold text-2xl",children:c.name.charAt(0).toUpperCase()})})}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,D.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:c.name}),(0,D.jsx)("div",{className:"flex items-center space-x-2",children:(e=>{const s=Array.isArray(e)?e:[e];return s.includes("ADMIN")?(0,D.jsx)(l.A,{className:"h-5 w-5 text-yellow-500"}):s.includes("ORGANIZER")?(0,D.jsx)(i.A,{className:"h-5 w-5 text-blue-500"}):(0,D.jsx)(n.A,{className:"h-5 w-5 text-gray-500"})})(c.roles)})]}),(0,D.jsx)("p",{className:"text-gray-600 mb-2",children:c.email}),(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[d(c.roles),(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(c.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:c.isActive?"Active":"Inactive"})]})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h4",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Contact Information"}),(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(S.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,D.jsx)("p",{className:"text-gray-900",children:c.email})]})]}),c.phone&&(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(E.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Phone"}),(0,D.jsx)("p",{className:"text-gray-900",children:c.phone})]})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(i.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Roles"}),(0,D.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:d(c.roles)})]})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)("div",{className:"h-5 w-5 rounded-full ".concat(c.isActive?"bg-green-500":"bg-red-500")}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Account Status"}),(0,D.jsx)("p",{className:"font-medium ".concat(c.isActive?"text-green-600":"text-red-600"),children:c.isActive?"Active Account":"Inactive Account"})]})]})]})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsx)("h4",{className:"text-lg font-medium text-gray-900 border-b border-gray-200 pb-2",children:"Account Information"}),(0,D.jsxs)("div",{className:"space-y-3",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(M.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Member Since"}),(0,D.jsx)("p",{className:"text-gray-900",children:(0,w.Yq)(c.createdAt)})]})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(y.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Last Login"}),(0,D.jsx)("p",{className:"text-gray-900",children:c.lastLogin?(0,w.Yq)(c.lastLogin):"Never logged in"})]})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(n.A,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"User ID"}),(0,D.jsx)("p",{className:"text-gray-900 font-mono",children:c.id})]})]}),c.avatar&&(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsx)(R,{className:"h-5 w-5 text-gray-400"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm text-gray-500",children:"Profile Picture"}),(0,D.jsx)("p",{className:"text-gray-900",children:"Custom avatar uploaded"})]})]})]})]})]}),(0,D.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[(0,D.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-3",children:"Account Summary"}),(0,D.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===(s=c.roles)||void 0===s?void 0:s.length)||1}),(0,D.jsxs)("p",{className:"text-sm text-gray-600",children:["Role",(null===(t=c.roles)||void 0===t?void 0:t.length)>1?"s":""]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.createdAt?Math.ceil((new Date-new Date(c.createdAt))/864e5):0}),(0,D.jsx)("p",{className:"text-sm text-gray-600",children:"Days Active"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.isActive?"Yes":"No"}),(0,D.jsx)("p",{className:"text-sm text-gray-600",children:"Can Login"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.lastLogin?"Recent":"Never"}),(0,D.jsx)("p",{className:"text-sm text-gray-600",children:"Last Activity"})]})]})]}),(0,D.jsx)("div",{className:"flex justify-end pt-6",children:(0,D.jsx)("button",{onClick:r,className:"btn-primary",children:"Close"})})]})]})})},T=e=>{let{isOpen:s,onClose:t,onConfirm:a,isLoading:r=!1,title:l="Confirm Action",message:n="Are you sure you want to proceed?",confirmText:d="Confirm",cancelText:o="Cancel",confirmButtonClass:x="btn-danger",icon:u="warning",showIcon:h=!0}=e;if(!s)return null;return(0,D.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,D.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,D.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),(0,D.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg",children:[(0,D.jsxs)("div",{className:"flex items-start space-x-4",children:[h&&(0,D.jsx)("div",{className:"flex-shrink-0",children:(0,D.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-red-100",children:(()=>{switch(u){case"danger":case"delete":return(0,D.jsx)(m.A,{className:"h-6 w-6 text-red-600"});case"user":return(0,D.jsx)(v,{className:"h-6 w-6 text-red-600"});case"shield":return(0,D.jsx)(i.A,{className:"h-6 w-6 text-yellow-600"});default:return(0,D.jsx)(c.A,{className:"h-6 w-6 text-yellow-600"})}})()})}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l}),(0,D.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:r,children:(0,D.jsx)(C.A,{className:"h-5 w-5"})})]}),(0,D.jsx)("div",{className:"mb-6",children:(0,D.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:n})})]})]}),(0,D.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,D.jsx)("button",{type:"button",onClick:t,className:"btn-secondary",disabled:r,children:o}),(0,D.jsx)("button",{type:"button",onClick:()=>{a()},className:x,disabled:r,children:r?(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):d})]})]})]})})},I=()=>{var e,s,t,u,k,C;const[S,U]=(0,a.useState)(""),[E,M]=(0,a.useState)(""),[R,I]=(0,a.useState)(""),[O,Q]=(0,a.useState)(0),[q]=(0,a.useState)(10),[z,F]=(0,a.useState)("id"),[B,G]=(0,a.useState)("ASC"),[V,Y]=(0,a.useState)([]),[Z,H]=(0,a.useState)(!1),[_,$]=(0,a.useState)(!1),[K,X]=(0,a.useState)(!1),[J,W]=(0,a.useState)(!1),[ee,se]=(0,a.useState)(null),te=(0,r.useQueryClient)(),{data:ae,isLoading:re,error:le}=(0,r.useQuery)(["admin-users",{page:O,size:q,sortBy:z,sortDirection:B,search:S,role:E,isActive:R}],(()=>b.ex.getAllUsers({page:O,size:q,sortBy:z,sortDirection:B,search:S||void 0,role:E||void 0,isActive:""!==R?"true"===R:void 0})),{staleTime:3e4,keepPreviousData:!0,onError:e=>{console.error("Error fetching users:",e),A.Ay.error("Failed to load users")}}),{data:ie}=(0,r.useQuery)("user-statistics",(()=>b.ex.getUserStatistics()),{staleTime:3e5,onError:e=>{console.error("Error fetching user statistics:",e)}}),{data:ne}=(0,r.useQuery)("roles",(()=>b.Lf.getAllRoles()),{staleTime:6e5,onError:e=>{console.error("Error fetching roles:",e)}}),ce=(0,r.useMutation)((e=>b.ex.createUser(e)),{onSuccess:()=>{A.Ay.success("User created successfully"),te.invalidateQueries("admin-users"),te.invalidateQueries("user-statistics"),H(!1)},onError:e=>{A.Ay.error(e.errorMessage||"Failed to create user")}}),de=(0,r.useMutation)((e=>{let{id:s,userData:t}=e;return b.ex.updateUser(s,t)}),{onSuccess:()=>{A.Ay.success("User updated successfully"),te.invalidateQueries("admin-users"),$(!1),se(null)},onError:e=>{A.Ay.error(e.errorMessage||"Failed to update user")}}),oe=(0,r.useMutation)((e=>b.ex.deleteUser(e)),{onSuccess:()=>{A.Ay.success("User deleted successfully"),te.invalidateQueries("admin-users"),te.invalidateQueries("user-statistics"),W(!1),se(null)},onError:e=>{A.Ay.error(e.errorMessage||"Failed to delete user")}}),xe=(0,r.useMutation)((e=>{let{id:s,isActive:t}=e;return b.ex.toggleUserStatus(s,t)}),{onSuccess:()=>{A.Ay.success("User status updated successfully"),te.invalidateQueries("admin-users"),te.invalidateQueries("user-statistics")},onError:e=>{A.Ay.error(e.errorMessage||"Failed to update user status")}}),me=(0,r.useMutation)((e=>{let{id:s,newPassword:t}=e;return b.ex.resetUserPassword(s,t)}),{onSuccess:()=>{A.Ay.success("Password reset successfully")},onError:e=>{A.Ay.error(e.errorMessage||"Failed to reset password")}}),ue=(0,r.useMutation)((e=>b.ex.bulkDeleteUsers(e)),{onSuccess:()=>{A.Ay.success("".concat(V.length," users deleted successfully")),te.invalidateQueries("admin-users"),te.invalidateQueries("user-statistics"),Y([])},onError:e=>{A.Ay.error(e.errorMessage||"Failed to delete users")}}),he=e=>{z===e?G("ASC"===B?"DESC":"ASC"):(F(e),G("ASC")),Q(0)},pe=e=>{const s=Array.isArray(e)?e:[e];return s.includes("ADMIN")?(0,D.jsx)(l.A,{className:"h-4 w-4 text-yellow-500"}):s.includes("ORGANIZER")?(0,D.jsx)(i.A,{className:"h-4 w-4 text-blue-500"}):(0,D.jsx)(n.A,{className:"h-4 w-4 text-gray-500"})},ye=e=>{const s="px-2 py-1 rounded-full text-xs font-medium";switch((Array.isArray(e)?e:[e])[0]){case"ADMIN":return"".concat(s," bg-yellow-100 text-yellow-800");case"ORGANIZER":return"".concat(s," bg-blue-100 text-blue-800");case"STUDENT":return"".concat(s," bg-green-100 text-green-800");default:return"".concat(s," bg-gray-100 text-gray-800")}};if(le)return(0,D.jsxs)("div",{className:"text-center py-8",children:[(0,D.jsx)(c.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,D.jsx)("p",{className:"text-red-600",children:"Error loading users. Please try again later."}),(0,D.jsx)("button",{onClick:()=>te.invalidateQueries("admin-users"),className:"btn-primary mt-4",children:"Retry"})]});const ge=null===ae||void 0===ae?void 0:ae.data,je=(null===ie||void 0===ie||null===(e=ie.data)||void 0===e?void 0:e.totalUsers)||0,ve=(null===ie||void 0===ie||null===(s=ie.data)||void 0===s?void 0:s.activeUsers)||0,Ne=(null===ne||void 0===ne?void 0:ne.data)||[];return(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,D.jsx)("p",{className:"text-gray-600",children:"Manage user accounts, roles, and permissions"})]}),(0,D.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,D.jsxs)("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[je," Total Users"]}),(0,D.jsxs)("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:[ve," Active"]}),(0,D.jsxs)("button",{onClick:()=>H(!0),className:"btn-primary",children:[(0,D.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]}),(0,D.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,D.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Q(0)},className:"flex flex-col md:flex-row gap-4",children:[(0,D.jsx)("div",{className:"flex-1",children:(0,D.jsxs)("div",{className:"relative",children:[(0,D.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,D.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:S,onChange:e=>U(e.target.value),className:"pl-10 input-field"})]})}),(0,D.jsxs)("div",{className:"flex gap-4",children:[(0,D.jsxs)("select",{value:E,onChange:e=>M(e.target.value),className:"input-field min-w-[120px]",children:[(0,D.jsx)("option",{value:"",children:"All Roles"}),Ne.map((e=>(0,D.jsx)("option",{value:e.name,children:e.name},e.name)))]}),(0,D.jsxs)("select",{value:R,onChange:e=>I(e.target.value),className:"input-field min-w-[120px]",children:[(0,D.jsx)("option",{value:"",children:"All Status"}),(0,D.jsx)("option",{value:"true",children:"Active"}),(0,D.jsx)("option",{value:"false",children:"Inactive"})]}),(0,D.jsxs)("button",{type:"submit",className:"btn-primary whitespace-nowrap",children:[(0,D.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Apply"]})]})]})}),V.length>0&&(0,D.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("span",{className:"text-blue-800 font-medium",children:[V.length," user",V.length>1?"s":""," selected"]}),(0,D.jsxs)("div",{className:"flex space-x-2",children:[(0,D.jsxs)("button",{onClick:()=>{0!==V.length?window.confirm("Are you sure you want to delete ".concat(V.length," users?"))&&ue.mutate(V):A.Ay.error("Please select users to delete")},className:"btn-secondary text-red-600 hover:bg-red-50",disabled:ue.isLoading,children:[(0,D.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Delete Selected"]}),(0,D.jsx)("button",{onClick:()=>Y([]),className:"btn-secondary",children:"Cancel"})]})]})}),(0,D.jsx)("div",{className:"flex justify-end",children:(0,D.jsxs)("button",{onClick:async()=>{try{const e=await b.ex.exportUsers({search:S||void 0,role:E||void 0,isActive:""!==R?"true"===R:void 0}),s=new Blob([e.data],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="users_export_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a),A.Ay.success("Users exported successfully")}catch(le){A.Ay.error("Failed to export users")}},className:"btn-secondary",children:[(0,D.jsx)(h,{className:"h-4 w-4 mr-2"}),"Export CSV"]})}),(0,D.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[re?(0,D.jsx)("div",{className:"p-8 text-center",children:(0,D.jsx)(f.A,{})}):0===(null===ge||void 0===ge||null===(t=ge.content)||void 0===t?void 0:t.length)?(0,D.jsxs)("div",{className:"p-8 text-center",children:[(0,D.jsx)(p.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,D.jsx)("p",{className:"text-gray-600",children:"No users found"})]}):(0,D.jsx)("div",{className:"overflow-x-auto",children:(0,D.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,D.jsx)("thead",{className:"bg-gray-50",children:(0,D.jsxs)("tr",{children:[(0,D.jsx)("th",{className:"px-6 py-3 text-left",children:(0,D.jsx)("input",{type:"checkbox",checked:V.length===(null===ge||void 0===ge||null===(u=ge.content)||void 0===u?void 0:u.length)&&(null===ge||void 0===ge||null===(k=ge.content)||void 0===k?void 0:k.length)>0,onChange:e=>(e=>{var s,t;Y(e&&(null===ae||void 0===ae||null===(s=ae.data)||void 0===s||null===(t=s.content)||void 0===t?void 0:t.map((e=>e.id)))||[])})(e.target.checked),className:"rounded border-gray-300"})}),(0,D.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>he("name"),children:["User ","name"===z&&("ASC"===B?"\u2191":"\u2193")]}),(0,D.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,D.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>he("isActive"),children:["Status ","isActive"===z&&("ASC"===B?"\u2191":"\u2193")]}),(0,D.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700",onClick:()=>he("createdAt"),children:["Created ","createdAt"===z&&("ASC"===B?"\u2191":"\u2193")]}),(0,D.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),(0,D.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,D.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===ge||void 0===ge||null===(C=ge.content)||void 0===C?void 0:C.map((e=>(0,D.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,D.jsx)("input",{type:"checkbox",checked:V.includes(e.id),onChange:()=>{return s=e.id,void Y((e=>e.includes(s)?e.filter((e=>e!==s)):[...e,s]));var s},className:"rounded border-gray-300"})}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:e.avatar?(0,D.jsx)("img",{className:"h-10 w-10 rounded-full",src:e.avatar,alt:e.name}):(0,D.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,D.jsx)("span",{className:"text-primary-600 font-medium text-sm",children:e.name.charAt(0).toUpperCase()})})}),(0,D.jsxs)("div",{className:"ml-4",children:[(0,D.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,D.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&(0,D.jsx)("div",{className:"text-xs text-gray-400",children:e.phone})]})]})}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[pe(e.roles),(0,D.jsx)("span",{className:ye(e.roles),children:Array.isArray(e.roles)?e.roles.join(", "):e.roles})]})}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,D.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,w.Yq)(e.createdAt)}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin?(0,w.Yq)(e.lastLogin):"Never"}),(0,D.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,D.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,D.jsx)("button",{onClick:()=>(e=>{se(e),X(!0)})(e),className:"text-gray-600 hover:text-primary-600 transition-colors",title:"View Details",children:(0,D.jsx)(y.A,{className:"h-4 w-4"})}),(0,D.jsx)("button",{onClick:()=>(e=>{se(e),$(!0)})(e),className:"text-gray-600 hover:text-blue-600 transition-colors",title:"Edit User",children:(0,D.jsx)(g.A,{className:"h-4 w-4"})}),(0,D.jsx)("button",{onClick:()=>(e=>{const s=prompt("Enter new password for "+e.name+":");s&&s.length>=6?me.mutate({id:e.id,newPassword:s}):s&&A.Ay.error("Password must be at least 6 characters long")})(e),className:"text-gray-600 hover:text-purple-600 transition-colors",title:"Reset Password",children:(0,D.jsx)(j,{className:"h-4 w-4"})}),(0,D.jsx)("button",{onClick:()=>(e=>{xe.mutate({id:e.id,isActive:!e.isActive})})(e),className:"transition-colors ".concat(e.isActive?"text-gray-600 hover:text-red-600":"text-gray-600 hover:text-green-600"),title:e.isActive?"Deactivate":"Activate",disabled:xe.isLoading,children:e.isActive?(0,D.jsx)(v,{className:"h-4 w-4"}):(0,D.jsx)(N.A,{className:"h-4 w-4"})}),(0,D.jsx)("button",{onClick:()=>(e=>{se(e),W(!0)})(e),className:"text-gray-600 hover:text-red-600 transition-colors",title:"Delete User",disabled:oe.isLoading,children:(0,D.jsx)(m.A,{className:"h-4 w-4"})})]})})]},e.id)))})]})}),ge&&ge.totalPages>1&&(0,D.jsx)("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",ge.page*ge.size+1," to ",Math.min((ge.page+1)*ge.size,ge.totalElements)," of ",ge.totalElements," results"]}),(0,D.jsxs)("div",{className:"flex space-x-2",children:[(0,D.jsx)("button",{onClick:()=>Q(O-1),disabled:ge.first,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,D.jsxs)("span",{className:"px-3 py-2 text-sm text-gray-700",children:["Page ",O+1," of ",ge.totalPages]}),(0,D.jsx)("button",{onClick:()=>Q(O+1),disabled:ge.last,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),Z&&(0,D.jsx)(L,{isOpen:Z,onClose:()=>H(!1),onSubmit:e=>ce.mutate(e),isLoading:ce.isLoading,availableRoles:Ne,title:"Create New User"}),_&&ee&&(0,D.jsx)(L,{isOpen:_,onClose:()=>{$(!1),se(null)},onSubmit:e=>de.mutate({id:ee.id,userData:e}),isLoading:de.isLoading,availableRoles:Ne,initialData:ee,title:"Edit User"}),K&&ee&&(0,D.jsx)(P,{isOpen:K,onClose:()=>{X(!1),se(null)},user:ee}),J&&ee&&(0,D.jsx)(T,{isOpen:J,onClose:()=>{W(!1),se(null)},onConfirm:()=>oe.mutate(ee.id),isLoading:oe.isLoading,title:"Delete User",message:'Are you sure you want to delete "'.concat(ee.name,'"? This action cannot be undone.'),confirmText:"Delete",confirmButtonClass:"btn-danger"})]})}},6339:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(3797).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=473.4074979e.chunk.js.map